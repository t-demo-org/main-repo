# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  push:
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
 echo:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v3

      # Runs a single command using the runners shell
      - name: Run a one-line script
        run: echo "This an echo dummy stage"

 trigger:
  runs-on: ubuntu-latest
  env:
    REPO: t-demo-org/triggered-repo
  steps:
  - name: Workflow Dispatch
    # You may pin to the exact commit or the version.
    # uses: benc-uk/workflow-dispatch@4c044c1613fabbe5250deadc65452d54c4ad4fc7
    uses: benc-uk/workflow-dispatch@v1
    with:
      # Name or ID of workflow to run
      workflow: Trigger
      # GitHub token with repo write access, can NOT use secrets.GITHUB_TOKEN, see readme
      token: "${{ secrets.GIT_TOKEN }}"
      # Inputs to pass to the workflow, must be a JSON string
      # The reference of the workflow run. The reference can be a branch, tag, or a commit SHA
      ref: $GITHUB_REF
      # Repo owner & name, slash separated, only set if invoking a workflow in a different repo
      repo: $REPO
